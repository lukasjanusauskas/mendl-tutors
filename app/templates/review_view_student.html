{% extends "base.html" %}

{% block title %}Mėnesio atsiliepimai{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="text-center mb-5">
        <h1 class="fw-bold text-primary">📅 Atsiliepimai</h1>
        <p class="text-muted">Peržiūrėkite visus gautus ir parašytus atsiliepimus</p>
    </div>

    <!-- 🟢 GAUTI ATSILIEPIMAI -->
    <div class="card shadow-sm mb-5">
        <div class="card-header bg-success text-white">
            <h4 class="mb-0"><i class="bi bi-inbox-fill"></i> Gauti atsiliepimai</h4>
        </div>
        <div class="card-body">
            {% if recieved_reviews %}
                {% for review_id, review in recieved_reviews %}
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body bg-light rounded">
                        {% for key, review_data in review.items() %}
                            <div class="row mb-2">
                                <div class="col-md-3 fw-bold text-secondary">{{ key }}:</div>
                                <div class="col-md-9">{{ review_data }}</div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">Dar negavote jokių atsiliepimų.</p>
            {% endif %}
        </div>
    </div>

    <!-- 🔵 PARAŠYTI ATSILIEPIMAI -->
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0"><i class="bi bi-pencil-square"></i> Parašyti atsiliepimai</h4>
        </div>
        <div class="card-body">
            {% if written_reviews %}
                {% for review_id, review in written_reviews %}
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body bg-light rounded">
                        {% for key, review_data in review.items() %}
                            <div class="row mb-2">
                                <div class="col-md-3 fw-bold text-secondary">{{ key }}:</div>
                                <div class="col-md-9">{{ review_data }}</div>
                            </div>
                        {% endfor %}

                        <div class="text-end mt-3">
                            <a class="btn btn-outline-danger btn-sm"
                               href="{{ url_for('revoke_review_dialog_student', review_id=review_id, student_id=student_id) }}"
                               onclick="return confirm('Ar tikrai norite atsiimti šį atsiliepimą?')">
                                🗑️ Atsiimti atsiliepimą
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">Dar neparašėte jokių atsiliepimų.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
