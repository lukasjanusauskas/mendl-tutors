{% extends "base.html" %}
{% block title %}Mokėjimai{% endblock %}

{% block content %}
<div class="container py-4">
    <h3 class="mb-4">Mokėjimai</h3>

    <form method="get" action="{{ url_for('admin_all_payments') }}">
        <div>
            <input type="number" step="0.01" class="form-control" id="payment_min" name="payment_min"
                   placeholder="Nuo" value="{{ request.args.get('payment_min','') }}">
        </div>
        <div>
            <input type="number" step="0.01" class="form-control" id="payment_max" name="payment_max"
                   placeholder="Iki" value="{{ request.args.get('payment_max','') }}">
        </div>
        <div>
            <button type="submit" class="btn btn-primary">Filtruoti</button>
            <a href="{{ url_for('admin_all_payments') }}" class="btn btn-secondary ms-2">Išvalyti</a>
        </div>
    </form>

    {% if payments %}
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Laikas</th>
                    <th>Siuntėjas</th>
                    <th>Adresatas</th>
                    <th>Mokėjimo suma</th>
                </tr>
            </thead>
            <tbody>
                {% for p in payments %}
                <tr>
                    <td>
                        {{ p.time_payment.strftime('%Y-%m-%d %H:%M:%S') }}
                    </td>
                    <td>
                        {{ p.student_name }}
                    </td>
                    <td>
                        {{ p.tutor_name }}
                    </td>
                    <td>
                        {{ p.payment }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="alert alert-info">Mokėjimų nerasta.</div>
    {% endif %}
</div>
{% endblock %}
